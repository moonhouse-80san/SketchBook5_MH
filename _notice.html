<div style="float:left; border-top:1px solid #ddd; width:100%">
	<!--@if($mi->default_style=='list')--><!--@else--><table class="bd_lst bd_tb_lst bd_tb common_notice"><!--@end-->
		<tr loop="$notice_list=>$no,$document" class="notice">
			<td $list_config['no']><span class="sbtn_mini sbtn-orange">{$lang->notice}</span></td>
			<td scope="col" class="m_no" style="color:{$category_list[$document->get('category_srl')]->color}"|cond="$category_list[$document->get('category_srl')]->color!='transparent'"><span>{$category_list[$document->get('category_srl')]->title}</span></td>

			<td class="title">
				<!--// 공지사항 일반 출력 -->
				<a cond="$mi->notice_view_slide ==''" href="{getUrl('document_srl',$document->document_srl, 'listStyle', $listStyle, 'cpage','')}">
					<strong><include cond="$mi->notice_view_slide ==''" target="title.html" /></strong>
				</a>

				<!--// 공지사항 슬라이드 출력 -->
				<details cond="!$mi->notice_view_slide ==''" class="accordion">
					<summary class="notice_fold">
						<strong><include target="title.html" /></strong>
					</summary>

						<p style="margin-top:10px">
							<span>{$document->getContent(false)}</span>

							<div style="text-align:right; float:left; padding-bottom:5px; width:100%">
								<div style="float:right">
									<a href="{getUrl('document_srl',$document->document_srl, 'listStyle', $listStyle, 'cpage','')}" class="btn"><span>공지글 보기</span></a>

									<!--@if($grant->write_comment && $oDocument->isEnableComment() )-->
									<a href="{getUrl('', 'mid', $mid, 'act','dispBoardWriteComment','document_srl',$document->document_srl)}" class="btn"><span>{$lang->cmd_comment_registration}</span></a>
									<!--@end-->
									
									<!--@if($document->isEditable())-->
										<!--@if(!( !$grant->manager && $document->getCommentCount()))-->	
										<a href="{getUrl('', 'mid', $mid, 'act','dispBoardWrite','document_srl',$document->document_srl,'comment_srl','')}" class="btn"><span>{$lang->cmd_modify}</span></a>
										<!--@end-->
										<!--@if(!( !$grant->manager && $oDocument->getCommentCount()))-->	
										<a href="{getUrl('', 'mid', $mid, 'act','dispBoardDelete','document_srl',$document->document_srl,'comment_srl','')}" class="btn"><span>{$lang->cmd_delete}</span></a>
										<!--@end-->
								<!--@end-->
								</div>
							</div>
						</p>

						<style>
							summary.notice_fold::-webkit-details-marker { display: none; }
							summary.notice_fold { display: block; }
							summary.notice_fold { position: relative; padding-left: 1.2em; cursor: pointer; }

							summary.notice_fold::before { content: ""; position: absolute;	 border-top: 0.5em solid transparent; border-bottom: 0.5em solid transparent; border-left: 0.75em solid yellowgreen; top: 0.2em; left: 0; transition: .25s transform; margin-top:2px; }
							details[open] summary:before { transform: rotateZ(90deg); }

							details[open] > summary::-webkit-details-marker { transform:rotate3d(0, 0, 1, 180deg);}
							details[open] > summary ~ * { animation:reveal 2s;}
							@keyframes reveal {
								from { opacity:0; transform:translate3d(0, -20px, 0); }
								to { opacity:1; transform:translate3d(0, 0, 0); }
							}
						</style>
				</details>
			</td>
			<td cond="$list_config['nick_name']"><a href="#popup_menu_area" class="member_{$document->get('member_srl')}" onclick="return false">{$document->getNickName()}</a></td>
			<td cond="$list_config['regdate']">{$document->getRegdate('Y.m.d')}</td>
			<td cond="$list_config['last_update']">{getTimeGap($document->get('last_update'), "y.m.d")}</td>
			<td cond="$list_config['readed_count'] && $val->idx==-1">{$document->get('readed_count')>0?$document->get('readed_count'):'0'}</td>
			<!-- 여기에 평점 표시 부분 추가 -->
			<td cond="!$mi->star_point =='' && !$mi->star_user == ''">
				{@
					$oStarPointModel = getModel('starpoint');
					$total_point = $oStarPointModel->getDocumentRatedTotalPoint($document->document_srl);
				}
				<!--@if($total_point->avg > 0)-->
					<span class="starpoint">
						<span cond="$mi->star_user == 'all' || $mi->star_user == 'point'" class="sp_score">{number_format($total_point->avg, 1)}점</span>
						<span cond="$mi->star_user == 'all' || $mi->star_user == 'star'" class="starRating pr_tooltip" pr_color="dark" pr_position="right" title="{number_format($total_point->avg, 1)}점">
							<span style="width:{$total_point->avg*20}%">{number_format($total_point->avg, 1)}</span>
						</span>
					</span>
				<!--@end-->
			</td>
			<td cond="$grant->manager" class="check m_no"><input type="checkbox" name="cart" value="{$document->document_srl}" class="iCheck" title="Check This Article" onclick="doAddDocumentCart(this)" checked="checked"|cond="$document->isCarted()" /></td>
		</tr>
	<!--@if($mi->default_style=='list')--><!--@else--></table><!--@end-->
</div>

<script cond="!$mi->notice_view_slide ==''" >
	<!--// 한개의 공지내용만 Open -->
	const detailsList = document.querySelectorAll('.accordion');

	detailsList.forEach(details => {
		details.addEventListener('click', () => {
			if (details.open) {
				// 다른 details 닫기
				detailsList.forEach(otherDetails => {
					if (otherDetails !== details && otherDetails.open) {
						otherDetails.open = false;
					}
				});

				// 스크롤 위치 조정
				const detailsTop = details.getBoundingClientRect().top;
				window.scrollTo({
					top: window.pageYOffset + detailsTop - 100,
					behavior: 'smooth',
				});
			}
		});
	});

	<!--// 내용글 Open시 슬라이딩 효과 -->
	const $_details = $(".accordion");
	const $_summary = $_details.find(".notice_fold");

	$_summary.on("click", function(e) {
		e.preventDefault();

		const $_this = $(this);
		const $_this_details = $_this.parent("details");
		const $_this_details_p = $_this_details.find("p");
		const $_this_details_open = $_this_details.attr("open");

		if (! $_this_details_open) {
			$_this_details.prop("open", true);
			$_this_details_p.stop().slideDown(1000);
		} else {
			$_this_details_p.stop().slideUp(500, function() {
				$_this_details.prop("open", false);
			});
		}
	});
</script>